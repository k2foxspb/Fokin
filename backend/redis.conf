# Redis Configuration для Django Media Cache

# Максимальный размер памяти (настройте под ваши нужды)
# 256MB обычно достаточно для кэша медиа-файлов
maxmemory 256mb

# Политика вытеснения при достижении лимита памяти
# allkeys-lru - удаляет наименее используемые ключи (Least Recently Used)
maxmemory-policy allkeys-lru

# Сохранение на диск отключено для максимальной производительности (кэш может быть потерян при перезагрузке)
save ""

# Альтернатива: сохранение каждые 15 минут если были изменения
# save 900 1

# Максимальное количество клиентов
maxclients 10000

# Timeout для неактивных соединений (5 минут)
timeout 300

# Настройки для оптимизации производительности
tcp-backlog 511
tcp-keepalive 300

# Логирование
loglevel notice
logfile /var/log/redis/redis-server.log

# Рабочая директория
dir /var/lib/redis
# Redis Configuration для Django Media Cache

# Максимальный размер памяти (настройте под ваши нужды)
# 256MB обычно достаточно для кэша медиа-файлов
maxmemory 256mb

# Политика вытеснения при достижении лимита памяти
# allkeys-lru - удаляет наименее используемые ключи (Least Recently Used)
maxmemory-policy allkeys-lru

# Сохранение на диск отключено для максимальной производительности (кэш может быть потерян при перезагрузке)
save ""

# Альтернатива: сохранение каждые 15 минут если были изменения
# save 900 1

# Максимальное количество клиентов
maxclients 10000

# Timeout для неактивных соединений (5 минут)
timeout 300

# Настройки для оптимизации производительности
tcp-backlog 511
tcp-keepalive 300

# Логирование
loglevel notice
logfile /var/log/redis/redis-server.log

# Рабочая директория
dir /var/lib/redis

# Bind на localhost (измените если Redis на отдельном сервере)
bind 127.0.0.1

# Порт
port 6379

# Защита паролем (раскомментируйте и установите пароль в продакшене)
# requirepass your_secure_password_here

# Отключение опасных команд в продакшене
rename-command CONFIG ""
rename-command FLUSHDB ""
rename-command FLUSHALL ""
rename-command SHUTDOWN ""

# LRU настройки для более эффективного вытеснения
# Количество образцов для LRU алгоритма (больше = точнее, но медленнее)
maxmemory-samples 5

# Lazy freeing для удаления больших объектов в фоне
lazyfree-lazy-eviction yes
lazyfree-lazy-expire yes
# Bind на localhost (измените если Redis на отдельном сервере)
bind 127.0.0.1

# Порт
port 6379

# Защита паролем (раскомментируйте и установите пароль в продакшене)
# requirepass your_secure_password_here

# Отключение опасных команд в продакшене
rename-command CONFIG ""
rename-command FLUSHDB ""
rename-command FLUSHALL ""
rename-command SHUTDOWN ""

# LRU настройки для более эффективного вытеснения
# Количество образцов для LRU алгоритма (больше = точнее, но медленнее)
maxmemory-samples 5

# Lazy freeing для удаления больших объектов в фоне
lazyfree-lazy-eviction yes
lazyfree-lazy-expire yes
